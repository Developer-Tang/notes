<?xml version="1.0" encoding="UTF-8"?>
<!-- Do not edit this file with editors other than diagrams.net -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="1032px" height="761px" viewBox="-0.5 -0.5 1032 761" content="&lt;mxfile host=&quot;drawio-plugin&quot; modified=&quot;2024-07-15T01:17:18.820Z&quot; agent=&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36&quot; etag=&quot;AZI1Td_7WQlyywkyl4qz&quot; version=&quot;22.1.22&quot; type=&quot;embed&quot;&gt;&lt;diagram id=&quot;23iRSUPoRavnBvh4doch&quot; name=&quot;Page-1&quot;&gt;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&lt;/diagram&gt;&lt;/mxfile&gt;"><defs/><g><path d="M 241 300 L 261.03 300.03 L 261.03 80.03 L 274.63 80.01" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 279.88 80 L 272.89 83.51 L 274.63 80.01 L 272.88 76.51 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><path d="M 241 300 L 261.03 300.03 L 261.03 30.03 L 274.63 30.01" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 279.88 30 L 272.89 33.51 L 274.63 30.01 L 272.88 26.51 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><path d="M 241 300 L 261.03 300.03 L 261.03 160.03 L 274.63 160.01" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 279.88 160 L 272.89 163.51 L 274.63 160.01 L 272.88 156.51 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><path d="M 241 300 L 261.03 300.03 L 261.03 220.03 L 274.63 220.01" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 279.88 220 L 272.89 223.51 L 274.63 220.01 L 272.88 216.51 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><path d="M 241 300 L 261.03 300.03 L 261.03 320.03 L 274.63 320.01" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 279.88 320 L 272.89 323.51 L 274.63 320.01 L 272.88 316.51 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><path d="M 241 300 L 261.03 300.03 L 261.03 380.03 L 274.63 380.01" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 279.88 380 L 272.89 383.51 L 274.63 380.01 L 272.88 376.51 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><path d="M 241 300 L 261.03 300.03 L 261.03 440.03 L 274.63 440.01" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 279.88 440 L 272.89 443.51 L 274.63 440.01 L 272.88 436.51 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><path d="M 241 300 L 261.03 300.03 L 261.03 500.03 L 274.63 500.01" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 279.88 500 L 272.89 503.51 L 274.63 500.01 L 272.88 496.51 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><path d="M 241 300 L 261.03 300.03 L 261.03 560.03 L 274.63 560.01" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 279.88 560 L 272.89 563.51 L 274.63 560.01 L 272.88 556.51 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><path d="M 241 300 L 261.03 300.03 L 261.03 620.03 L 274.63 620.01" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 279.88 620 L 272.89 623.51 L 274.63 620.01 L 272.88 616.51 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><path d="M 241 300 L 261.03 300.03 L 261.03 680.03 L 274.63 680.01" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 279.88 680 L 272.89 683.51 L 274.63 680.01 L 272.88 676.51 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><path d="M 241 300 L 261.03 300.03 L 261.03 740.03 L 274.63 740.01" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 279.88 740 L 272.89 743.51 L 274.63 740.01 L 272.88 736.51 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><rect x="1" y="280" width="240" height="40" fill="#d5e8d4" stroke="#82b366" pointer-events="all"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" text-anchor="middle" font-size="15px"><text x="120.5" y="297">AbstractApplicationContext.refresh()</text><text x="120.5" y="315">容器刷新</text></g><rect x="281" y="10" width="200" height="40" fill="#d5e8d4" stroke="#82b366" pointer-events="all"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" text-anchor="middle" font-size="15px"><text x="380.5" y="27">prepareRefresh()</text><text x="380.5" y="45">刷新前的处理</text></g><path d="M 481 80.03 L 521.03 80.03 L 521.03 20.03 L 554.63 20" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 559.88 20 L 552.88 23.51 L 554.63 20 L 552.88 16.51 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><path d="M 481 80 L 554.63 80" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 559.88 80 L 552.88 83.5 L 554.63 80 L 552.88 76.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><rect x="281" y="60" width="200" height="40" fill="#d5e8d4" stroke="#82b366" pointer-events="all"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" text-anchor="middle" font-size="15px"><text x="380.5" y="77">obtainFreshBeanFactory()</text><text x="380.5" y="95">获取 beanFactory</text></g><rect x="561" y="0" width="250" height="40" fill="#d5e8d4" stroke="#82b366" pointer-events="all"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" text-anchor="middle" font-size="15px"><text x="685.5" y="17">refreshBeanFactorty()</text><text x="685.5" y="35">刷新 beanFactory，并设置序列化 ID</text></g><rect x="561" y="50" width="240" height="60" fill="#d5e8d4" stroke="#82b366" pointer-events="all"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" text-anchor="middle" font-size="15px"><text x="680.5" y="68">getBeanFactory()</text><text x="680.5" y="86">返回之前初始化的 beanFactory，</text><text x="680.5" y="104">即【DefaultListableBeanFactoy】</text></g><rect x="281" y="140" width="200" height="40" fill="#d5e8d4" stroke="#82b366" pointer-events="all"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" text-anchor="middle" font-size="15px"><text x="380.5" y="157">obtainFreshBeanFactory()</text><text x="380.5" y="175">获取 beanFactory</text></g><rect x="521" y="120" width="510" height="160" fill="#fff2cc" stroke="#d6b656" pointer-events="all"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="15px"><text x="522.5" y="140.5">添加 bean 后置处理器</text><text x="522.5" y="158.5">【ApplicationContextAwareProcessor】、【ApplicaitonListenerDetector】</text><text x="522.5" y="176.5">添加可以解析的自动装配器，即在任何组件中东可以自动注入</text><text x="522.5" y="194.5">【BeanFactory】、【ResourceLoader】、【ApplicationEventPublisher】、</text><text x="522.5" y="212.5">【ApplicationContext】</text><text x="522.5" y="230.5">添加环境变量</text><text x="522.5" y="248.5">environment</text></g><path d="M 481 160 L 514.63 160" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 519.88 160 L 512.88 163.5 L 514.63 160 L 512.88 156.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><rect x="281" y="200" width="200" height="40" fill="#d5e8d4" stroke="#82b366" pointer-events="all"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" text-anchor="middle" font-size="15px"><text x="380.5" y="217">postProcessBeanFactory()</text><text x="380.5" y="235">创建并与准备后的自定义设置</text></g><rect x="281" y="300" width="260" height="40" fill="#d5e8d4" stroke="#82b366" pointer-events="all"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" text-anchor="middle" font-size="15px"><text x="410.5" y="317">invokeBeanFactoryPostProcessors()</text><text x="410.5" y="335">执行 BeanFactoryPostProcessor 方法</text></g><rect x="281" y="360" width="220" height="40" fill="#d5e8d4" stroke="#82b366" pointer-events="all"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" text-anchor="middle" font-size="15px"><text x="390.5" y="377">registerBeanProcessors()</text><text x="390.5" y="395">向容器中注册 bean 后置处理器</text></g><rect x="281" y="420" width="240" height="40" fill="#d5e8d4" stroke="#82b366" pointer-events="all"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" text-anchor="middle" font-size="15px"><text x="400.5" y="437">initMessageSource()</text><text x="400.5" y="455">初始化 MessageSource 国际化组件</text></g><rect x="281" y="480" width="240" height="40" fill="#d5e8d4" stroke="#82b366" pointer-events="all"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" text-anchor="middle" font-size="15px"><text x="400.5" y="497">initApplicationEventMulticaster()</text><text x="400.5" y="515">初始化事件派发器</text></g><rect x="281" y="540" width="200" height="40" fill="#d5e8d4" stroke="#82b366" pointer-events="all"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" text-anchor="middle" font-size="15px"><text x="380.5" y="557">onRefresh()</text><text x="380.5" y="575">自定义刷新逻辑</text></g><rect x="281" y="600" width="200" height="40" fill="#d5e8d4" stroke="#82b366" pointer-events="all"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" text-anchor="middle" font-size="15px"><text x="380.5" y="617">registerListeners()</text><text x="380.5" y="635">注册监听器</text></g><rect x="281" y="660" width="220" height="40" fill="#d5e8d4" stroke="#82b366" pointer-events="all"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" text-anchor="middle" font-size="15px"><text x="390.5" y="677">finishBeanFactoryInitalization()</text><text x="390.5" y="695">初始化所有非单例 bean</text></g><rect x="281" y="720" width="200" height="40" fill="#d5e8d4" stroke="#82b366" pointer-events="all"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" text-anchor="middle" font-size="15px"><text x="380.5" y="737">finishRefesh()</text><text x="380.5" y="755">发布容器刷新完成事件</text></g></g></svg>